$(document).ready(function() {
  $('#new_bid_form').on('ajax:success', function(event, data) {
    $('.bids tr:first-child').after(data);
    var hours = data.replace(/\D+/g, "");
    $('.you-highest').removeClass('hide');
    $('#hours').text(hours);
    $('#flash').text("");
    $('#flash').removeClass("alert alert-errors");
    $('.no-bids-yet').text("Highest Bid");
  });
  
  $('#new_bid_form').on('ajax:error', function(event, data) {
    $('#flash').text("");
    $('#flash').addClass("alert alert-errors");
    $('#flash').append(data.responseText);
  });

  $('#trigger').click(function(){
      $('#new_bid_form').fadeIn(50);
      $('#overlay').fadeIn(50);
  });
  
  $('#overlay').click(function(){
      $('#new_bid_form').fadeOut(50);
      $('#overlay').fadeOut(50);
  });

  $('.commit-to-bid').click(function(){
      $('#new_bid_form').fadeOut(50);
      $('#overlay').fadeOut(50);
  });
  
  $('#bid_charity_id').tooltip({
    'placement': "top"
  })

  var availableTags = <%= Charity.all.map { |charity| charity.name } %>
  $("#bid_charity_id").autocomplete({
    source: availableTags
  });
});
